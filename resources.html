<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>National Security Council</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;400&display=swap" rel="stylesheet">
    
    <style>
            :root {
                --primary: #071029;
                --panel: rgba(8,16,28,0.66);
                --accent-sun: #FFC62B;
                --accent-red: #C1272D;
                --accent-blue: #0038A8;
                --text: #ffffff;
                --muted: #c9d0d8;
                --radius: 14px;
            }
        * { box-sizing: border-box; }
                        body {
                                margin: 0;
                                font-family: 'Montserrat', Arial, sans-serif;
                                background:
                                    radial-gradient(900px 300px at 50% 10%, rgba(255,198,43,0.06), transparent 18%),
                                    linear-gradient(180deg, #071029 0%, #02102a 60%, #03102f 100%);
                                background-attachment: fixed;
                                color: var(--text);
                                min-height: 100vh;
                                display: flex;
                                flex-direction: column;
                        }
        nav {
            width: 100%;
            background: transparent;
            padding: 1.2rem 0;
            display: flex;
            justify-content: center;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        nav .logo {
            font-size: 1.7rem;
            font-weight: 800;
            color: var(--accent-blue);
            letter-spacing: 2px;
            margin-right: 2rem;
        }
        nav ul {
            list-style: none;
            display: flex;
            gap: 2rem;
            margin: 0;
            padding: 0;
        }
        nav ul li a {
            color: var(--text);
            text-decoration: none;
            font-weight: 700;
            font-size: 1.05rem;
            letter-spacing:0.4px;
            transition: color 0.18s;
            padding: 0.15rem 0.25rem;
        }
        nav ul li a:hover { color: var(--accent-sun); }
        .hero {
            text-align: center;
            padding: 5rem 1rem 3rem 1rem;
            background: linear-gradient(180deg, rgba(0,0,0,0.04) 0%, rgba(0,0,0,0.02) 100%);
        }
        .hero h1 {
            font-size: 3rem;
            font-weight: 700;
            margin: 0 0 1rem 0;
            letter-spacing: 2px;
        }
        .hero p {
            font-size: 1.3rem;
            color: var(--muted);
            margin-bottom: 2.5rem;
        }
        .hero .socials {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
        }
        .hero .socials a {
            color: var(--accent);
            font-size: 2rem;
            transition: color 0.2s;
        }
        .hero .socials a:hover {
            color: #fff;
        }
        section {
            max-width: 800px;
            margin: 3rem auto;
            background: var(--panel);
            border-radius: 12px;
            padding: 2.5rem 2rem;
            box-shadow: 0 12px 36px rgba(0,0,0,0.55);
            backdrop-filter: blur(6px);
        }
        section h2 {
            color: var(--accent-sun);
            margin-top: 0;
            font-size: 2rem;
        }
        section p, section ul { color: var(--muted); font-size: 1.1rem; }
        section ul {
            padding-left: 1.2rem;
        }
        footer {
            margin-top: auto;
            background: #181b2a;
            color: var(--muted);
            text-align: center;
            padding: 1.5rem 0 1rem 0;
            font-size: 1rem;
            letter-spacing: 1px;
        }
        @media (max-width: 600px) {
            .hero h1 { font-size: 2rem; }
            section { padding: 1.2rem 0.7rem; }
            nav .logo { font-size: 1.2rem; }
        }
    /* header styles centralized in css/site.css */
/* expandable division styles (copied from standard-rank-list) */
.expandable { background: rgba(255,255,255,0.02); border-radius: 10px; margin-top: 1.25rem; overflow: hidden; backdrop-filter: blur(4px); border: 1px solid rgba(255,255,255,0.03); }
.expandable-header { padding: 0.9rem 1rem; cursor: pointer; display:flex; justify-content:space-between; align-items:center; gap:1rem; }
.expandable-header strong { font-size: 1.05rem; color: var(--text); }
.expandable-header .caret { transition: transform 0.25s ease; font-size:1.1rem; }
.expandable-content { max-height: 0; overflow: hidden; transition: max-height 0.32s ease; padding: 0 1rem; }
.expandable.open .expandable-header { background: rgba(0,0,0,0.06); }
.expandable.open .caret { transform: rotate(180deg); }
.expandable .muted { color: var(--muted); margin: 0.5rem 0 1rem 0; }
.expandable-header .caret { color: var(--muted); }
.expandable .rank-list { list-style: none; padding: 0 0 1rem 0; margin: 0; }
.expandable .rank-list li { padding: 0.4rem 0; border-bottom: 1px dashed rgba(255,255,255,0.03); }
.expandable-header strong { color: var(--accent-sun); font-weight:700; }
.expandable-header .caret { color: var(--accent-blue); }
.expandable.open { box-shadow: 0 8px 28px rgba(0,0,0,0.5); border-left: 4px solid var(--accent-red); padding-left: calc(1rem - 4px); }
.expandable-header:hover { background: rgba(0,56,168,0.04); }
.expandable-header:focus-within { background: rgba(255,198,43,0.04); }

/* Halloween overlay and cobweb corners */
.halloween::before {
    content: '';
    position: fixed;
    inset: 0;
    z-index: 50;
    pointer-events: none;
    background-image:
        radial-gradient(600px 180px at 10% 10%, rgba(255,140,0,0.02), transparent 15%),
        radial-gradient(700px 200px at 90% 30%, rgba(255,140,0,0.02), transparent 18%);
    mix-blend-mode: screen;
    opacity: 0.85;
    animation: fog-drift 40s linear infinite;
}

@keyframes fog-drift {
    0% { transform: translateX(-3%); }
    50% { transform: translateX(3%); }
    100% { transform: translateX(-3%); }
}

    .site-header{ width:100%; background: linear-gradient(180deg, rgba(6,12,22,0.98), rgba(8,16,28,0.92)); padding:1rem 0.5rem; letter-spacing:2px; box-shadow:0 6px 30px rgba(0,0,0,0.65), inset 0 -2px 0 rgba(255,255,255,0.02); display:flex; align-items:center; justify-content:center; gap:22px; position:relative; overflow:visible; }
    /* container used to center and style the expandable area */
    /* Slightly wider container for expandables on larger screens */
    .container { max-width: 1100px; width: calc(100% - 2rem); margin: 2rem auto; background: var(--panel); border-radius: var(--radius); padding: 2.25rem; box-shadow: 0 12px 36px rgba(0,0,0,0.6); backdrop-filter: blur(6px); }
    @media (max-width: 1100px) { .container { max-width: 96%; padding: 1.3rem; } }
/* Place cobwebs next to the title to avoid header overflow/scrollbars */
.site-title { position: relative; display:inline-block; margin:0; font-size:3rem; color:var(--accent-sun); font-family:'Montserrat',Arial,sans-serif; font-weight:900; line-height:1; -webkit-text-stroke:2px rgba(7,16,41,0.95); text-shadow:0 4px 0 rgba(7,16,41,0.95), 0 10px 22px rgba(0,0,0,0.6); }
.site-title::before,
.site-title::after {
    content: '';
    position: absolute;
    width: 64px;
    height: 64px;
    top: -8px;
    background-repeat: no-repeat;
    background-size: contain;
    opacity: 0;
    transition: opacity 600ms ease, transform 600ms ease;
    pointer-events: none;
}
.site-title::before {
    left: -44px;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><g stroke='rgba(255,255,255,0.14)' stroke-width='1.2' fill='none'><path d='M32 4 L32 60 M4 32 L60 32 M12 12 L52 52 M52 12 L12 52'/></g></svg>");
    transform: translateY(-4px) scale(0.92);
}
.site-title::after {
    right: -44px;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'><g stroke='rgba(255,255,255,0.14)' stroke-width='1.2' fill='none'><path d='M32 4 L32 60 M4 32 L60 32 M12 12 L52 52 M52 12 L12 52'/></g></svg>");
    transform: translateY(-4px) scale(0.92) scaleX(-1);
}

.halloween .site-title::before,
.halloween .site-title::after {
    opacity: 0.85;
    transform: translateY(0) scale(1);
}

@media (prefers-reduced-motion: reduce) {
    .halloween::before { animation: none; }
    .site-title::before,
    .site-title::after { transition: none; opacity: 0.7; transform: none; }
}

        .header-badge { height:56px; width:56px; object-fit:contain; display:inline-block; vertical-align:middle; border-radius:50%; }
        .header-badge.left { margin-right:14px; }
        .header-badge.right { margin-left:14px; }

        /* Cursor decorations removed site-wide — native cursor restored */

        /* Copy / clipboard UI and heading styles inserted into expandable */
        .copy-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: 0;
            color: var(--accent-blue);
            padding: 4px;
            margin-left: 10px;
            cursor: pointer;
            transition: transform 0.12s ease, filter 0.12s ease;
            vertical-align: middle;
            border-radius: 6px;
        }
        .copy-btn:focus { outline: 3px solid rgba(255,198,43,0.14); outline-offset: 4px; }
        .copy-btn:hover { transform: translateY(-1px); filter: brightness(0.95); }
        .copy-fa { font-size: 18px; display: inline-block; line-height: 1; }
    .copy-svg { width: 18px; height: 18px; vertical-align: middle; display: inline-block; fill: currentColor; }

        /* brief highlight when a line is copied */
        .copied-highlight { animation: highlight-pulse 900ms ease forwards; }
        @keyframes highlight-pulse {
            0% { background: rgba(255,198,43,0.16); box-shadow: 0 0 0 rgba(255,198,43,0); }
            40% { background: rgba(255,198,43,0.22); box-shadow: 0 8px 18px rgba(255,198,43,0.06); }
            100% { background: transparent; box-shadow: 0 0 0 rgba(255,198,43,0); }
        }

        .popup {
            position: fixed;
            background: var(--accent-sun);
            color: var(--primary);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            box-shadow: 0 10px 30px rgba(2,6,23,0.6);
            display: none;
            z-index: 200;
            opacity: 0;
            transform: translateY(-6px) scale(0.98);
            transition: opacity 180ms ease, transform 200ms ease;
        }
        .popup.show { display: block; opacity: 1; transform: translateY(0) scale(1); }

        /* Flying ghosts (enabled when .halloween is present). Respects prefers-reduced-motion. */
        .ghost {
            position: fixed;
            top: -10vh;
            pointer-events: none;
            z-index: 60; /* under popups (200) but above the fog overlay (50) */
            opacity: 0;
            will-change: transform, opacity, left, top;
        }
        .ghost .gbody{
            width: 100%; height: 100%;
            background: linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.86));
            border-radius: 48% 48% 36% 36% / 60% 60% 40% 40%;
            position: relative; box-shadow: 0 8px 24px rgba(0,0,0,0.35);
        }
        .ghost .geye{ position:absolute; width:6px; height:6px; background: rgba(0,0,0,0.78); border-radius:50%; top:28%; left:30%; }
        .ghost .geye.r { left:58%; }
        .ghost::after{ content:''; position:absolute; left:18%; right:18%; bottom:-8px; height:12px; border-radius:50%; background: radial-gradient(circle at 50% 0%, rgba(255,255,255,0.68), transparent 40%); opacity:0.16; filter: blur(6px); }

        @keyframes ghost-float {
            0% { transform: translateY(0) translateX(0) scale(0.92); opacity: 0; }
            8% { opacity: 1; }
            50% { transform: translateY(30vh) translateX(var(--gx, 0px)) scale(1); opacity: 0.96; }
            100% { transform: translateY(62vh) translateX(calc(var(--gx, 0px) * 1.2)) scale(0.96); opacity: 0; }
        }

        .ghost { animation-timing-function: linear; animation-fill-mode: forwards; }

        @media (prefers-reduced-motion: reduce) {
            .ghost { display: none !important; }
        }

        /* Headings: use site palette and inherit font for readability */
        h5 { font-family: inherit; font-size: 1rem; font-weight: 400; color: var(--text); margin: 0.35rem 0; }
        h6 { color: var(--accent-red); font-size: 0.9rem; margin: 0.25rem 0; }
        h2 { color: var(--accent-sun); font-size: 1.25rem; }
        h3 { color: var(--muted); font-size: 0.95rem; font-weight: 400; margin: 0.45rem 0; }
        .header-badge.left { margin-right:12px; }
        .header-badge.right { margin-left:12px; }
    /* per-page nav styles (copied for easy copy/paste) */
    nav {
        width: 100%;
        background: var(--panel);
        padding: 1.2rem 0;
        display: flex;
        justify-content: center;
        align-items: center;
        position: sticky;
        top: 0;
        z-index: 10;
        box-shadow: 0 2px 10px rgba(0,0,0,0.6);
    }
    nav .logo { font-size: 1.7rem; font-weight: 700; color: var(--accent-blue); letter-spacing: 2px; margin-right: 2rem; }
    nav ul { list-style: none; display: flex; gap: 2.5rem; margin: 0; padding: 0; font-family: 'Montserrat', Arial, sans-serif; }
    nav ul li a { color: var(--text); text-decoration: none; font-weight: 700; font-size: 1.05rem; letter-spacing: 0.4px; transition: color 0.18s; padding: 0.15rem 0.25rem; }
    nav ul li a:hover { color: var(--accent-sun); }

    .nav-list { display: flex; gap: 2.5rem; margin:0; padding:0; list-style:none; justify-content:center; font-family: 'Montserrat', Arial, sans-serif; }
    .hamburger { display: none; background:transparent;border:0;color:var(--text);font-size:1.6rem; cursor:pointer; }
    .hamburger:focus { outline:3px solid rgba(255,198,43,0.12); outline-offset:3px; }

    @media (max-width: 900px) {
        .hamburger { display:inline-block; }
        .nav-list { display: none; position: absolute; top: 64px; left: 0; right: 0; background: var(--panel); margin: 0 auto; flex-direction: column; gap:0; padding:0.5rem; border-top:1px solid rgba(255,255,255,0.02); }
        .nav-list.show { display:flex; }
        .nav-list li { padding: 0.35rem 0.6rem; }
    }

    .dropdown-toggle { color: var(--text); font-weight:600; padding:0.1rem 0.2rem; cursor:default; }
    .dropdown-toggle::after { content: '▾'; display:inline-block; margin-left:0.5rem; transition: transform 0.25s ease; color: var(--muted); }
    .dropdown-toggle[aria-expanded="true"]::after { transform: rotate(180deg); color: var(--accent-sun); }
    .nav-links li:hover .nav-dropdown { display: block; }
    .nav-dropdown { background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.04); box-shadow: none; backdrop-filter: blur(4px); border-radius:8px; padding:0.25rem 0; min-width:220px; position:absolute; top:100%; left:0; display:none; }
    .nav-dropdown li + li { border-top: 1px solid rgba(255,255,255,0.02); }
    .nav-dropdown a { display:block; padding:0.55rem 1rem; color:var(--text); text-decoration:none; font-size:1rem; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .nav-dropdown a:hover { background: rgba(255,255,255,0.04); color: var(--accent-sun); }

    .nav-links { background: var(--panel); position:sticky; top:0; z-index:20; padding:0.5rem 0; font-family: 'Montserrat', Arial, sans-serif; }
    
    @keyframes flicker {
  0%   { opacity: 1; }
  5%   { opacity: 0.8; }
  10%  { opacity: 1; }
  15%  { opacity: 0.9; }
  20%  { opacity: 1; }
  25%  { opacity: 0.85; }
  30%  { opacity: 1; }
  100% { opacity: 1; }
}

body.flicker {
  animation: flicker 1.5s infinite;
}

    </style>
    <script src="https://kit.fontawesome.com/4b7e5e8e2e.js" crossorigin="anonymous"></script>
</head>
<body>
        <header class="site-header">
            <a href="/home" aria-label="Home"><img src="https://www.habbo.com/habbo-imaging/badge/b26154s01015s80115s96114s91113405bed8bb4cc3cc1d1e390e95904bb87.gif" alt="Badge" class="header-badge left"></a>
            <h1 class="site-title">National Security Council</h1>
            <a href="/home" aria-label="Home"><img src="https://www.habbo.com/habbo-imaging/badge/b26154s01015s80115s96114s91113405bed8bb4cc3cc1d1e390e95904bb87.gif" alt="Badge" class="header-badge right"></a>
        </header>
        <nav>
            <div class="nav-links">
                <div class="nav-left">
                    <button class="hamburger" aria-label="Toggle menu" aria-expanded="false">☰</button>
                </div>
                <ul class="nav-list">
                    <li><a href="/home">Home</a></li>
                    <li style="position:relative;">
                        <span id="ranklists-toggle" class="dropdown-toggle" aria-haspopup="menu" aria-expanded="false" aria-controls="ranklists-menu" tabindex="-1">Rank Lists</span>
                        <ul id="ranklists-menu" class="nav-dropdown" role="menu" aria-label="Rank Lists menu" aria-labelledby="ranklists-toggle">
                            <li><a href="/standard-rank-list">Standard Rank Lists</a></li>
                            <li><a href="/elective-rank-list">Elective Rank Lists</a></li>
                        </ul>
                    </li>
                    <li style="position:relative;">
                        <span id="resources-toggle" class="dropdown-toggle" aria-haspopup="menu" aria-expanded="false" aria-controls="resources-menu" tabindex="-1">Resources</span>
                        <ul id="resources-menu" class="nav-dropdown" role="menu" aria-label="Resources menu" aria-labelledby="resources-toggle">
                            <li><a href="/recruit-training.html">Recruit Training Manual</a></li>
                            <li><a href="/security-training.html">Security Training Manual</a></li>
                            <li><a href="/education-training.html">Education Training Manual</a></li>
                            <li><a href="/high-rank-training.html">High Rank Training Manual</a></li>
                            <li><a href="/tour-script.html">Tour Script</a></li>
                            <li><a href="/transfer-training.html">Transfer Training Script</a></li>
                        </ul>
                    </li>
                    <li><a href="#department">Department</a></li>
                    <li style="position:relative;">
                        <span id="policies-toggle" class="dropdown-toggle" aria-haspopup="menu" aria-expanded="false" aria-controls="policies-menu" tabindex="-1">Policies</span>
                        <ul id="policies-menu" class="nav-dropdown" role="menu" aria-label="Policies menu" aria-labelledby="policies-toggle">
                            <li><a href="/pay-system">Pay System</a></li>
                            <li><a href="/code-of-conduct">Code of Conduct</a></li>
                        </ul>
                    </li>
                    <li><a href="https://nsc.habboportal.xyz/auth/login" target="_blank" rel="noopener noreferrer">Portal</a></li>
                </ul>
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        var navList = document.querySelector('.nav-list');
                        var hamburger = document.querySelector('.hamburger');
                        hamburger.addEventListener('click', function(){
                            var open = navList.classList.toggle('show');
                            hamburger.setAttribute('aria-expanded', open ? 'true' : 'false');
                        });

                        var rankListLi = document.querySelector('.nav-list li:nth-child(2)');
                        var toggle = rankListLi.querySelector('.dropdown-toggle');
                        var dropdown = rankListLi.querySelector('.nav-dropdown');
                        var menuItems = Array.prototype.slice.call(dropdown.querySelectorAll('a'));

                        rankListLi.addEventListener('mouseenter', function() { dropdown.style.display = 'block'; toggle.setAttribute('aria-expanded','true'); });
                        rankListLi.addEventListener('mouseleave', function() { dropdown.style.display = 'none'; toggle.setAttribute('aria-expanded','false'); });

                        // click and keyboard handlers removed to restore hover-only dropdown behavior

                        dropdown.addEventListener('keydown', function(e){
                            var key = e.key; var current = document.activeElement; var idx = menuItems.indexOf(current);
                            if(key === 'ArrowDown'){ e.preventDefault(); var next = menuItems[(idx + 1) % menuItems.length]; if(next) next.focus(); }
                            else if(key === 'ArrowUp'){ e.preventDefault(); var prev = menuItems[(idx - 1 + menuItems.length) % menuItems.length]; if(prev) prev.focus(); }
                            else if(key === 'Home'){ e.preventDefault(); if(menuItems[0]) menuItems[0].focus(); }
                            else if(key === 'End'){ e.preventDefault(); if(menuItems[menuItems.length-1]) menuItems[menuItems.length-1].focus(); }
                            else if(key === 'Escape'){ dropdown.style.display = 'none'; toggle.setAttribute('aria-expanded','false'); toggle.focus(); }
                        });

                        document.addEventListener('click', function(ev){ if(!rankListLi.contains(ev.target)){ dropdown.style.display = 'none'; toggle.setAttribute('aria-expanded','false'); } if(!document.querySelector('.nav-links').contains(ev.target)){ navList.classList.remove('show'); hamburger.setAttribute('aria-expanded','false'); } });
                        // Policies dropdown: mirror Rank Lists behaviour so it works on hover, keyboard and touch
                        (function(){
                            var policiesToggle = document.getElementById('policies-toggle');
                            if(!policiesToggle) return;
                            var policiesLi = policiesToggle.parentNode;
                            var policiesDropdown = policiesLi.querySelector('.nav-dropdown');
                            var policiesItems = Array.prototype.slice.call(policiesDropdown.querySelectorAll('a'));

                            // Hover open/close for desktop
                            policiesLi.addEventListener('mouseenter', function(){ policiesDropdown.style.display = 'block'; policiesToggle.setAttribute('aria-expanded','true'); });
                            policiesLi.addEventListener('mouseleave', function(){ policiesDropdown.style.display = 'none'; policiesToggle.setAttribute('aria-expanded','false'); });

                            // Click/tap toggles the menu (useful on touch devices)
                            policiesToggle.addEventListener('click', function(e){
                                // If already visible, let clicks on links navigate; otherwise toggle visibility
                                var visible = policiesDropdown.style.display === 'block' || window.getComputedStyle(policiesDropdown).display === 'block';
                                policiesDropdown.style.display = visible ? 'none' : 'block';
                                policiesToggle.setAttribute('aria-expanded', visible ? 'false' : 'true');
                                e.preventDefault();
                            });

                            // keyboard navigation inside the dropdown
                            policiesDropdown.addEventListener('keydown', function(e){
                                var key = e.key; var current = document.activeElement; var idx = policiesItems.indexOf(current);
                                if(key === 'ArrowDown'){ e.preventDefault(); var next = policiesItems[(idx + 1) % policiesItems.length]; if(next) next.focus(); }
                                else if(key === 'ArrowUp'){ e.preventDefault(); var prev = policiesItems[(idx - 1 + policiesItems.length) % policiesItems.length]; if(prev) prev.focus(); }
                                else if(key === 'Home'){ e.preventDefault(); if(policiesItems[0]) policiesItems[0].focus(); }
                                else if(key === 'End'){ e.preventDefault(); if(policiesItems[policiesItems.length-1]) policiesItems[policiesItems.length-1].focus(); }
                                else if(key === 'Escape'){ policiesDropdown.style.display = 'none'; policiesToggle.setAttribute('aria-expanded','false'); policiesToggle.focus(); }
                            });

                            // Clicking outside closes the policies dropdown
                            document.addEventListener('click', function(ev){ if(!policiesLi.contains(ev.target)){ policiesDropdown.style.display = 'none'; policiesToggle.setAttribute('aria-expanded','false'); } });
                        })();
                        // Resources dropdown handlers (mirror Rank Lists / Policies)
                        (function(){
                            var resourcesToggle = document.getElementById('resources-toggle');
                            if(!resourcesToggle) return;
                            var resourcesLi = resourcesToggle.parentNode;
                            var resourcesDropdown = resourcesLi.querySelector('.nav-dropdown');
                            var resourcesItems = Array.prototype.slice.call(resourcesDropdown.querySelectorAll('a'));

                            resourcesLi.addEventListener('mouseenter', function(){ resourcesDropdown.style.display = 'block'; resourcesToggle.setAttribute('aria-expanded','true'); });
                            resourcesLi.addEventListener('mouseleave', function(){ resourcesDropdown.style.display = 'none'; resourcesToggle.setAttribute('aria-expanded','false'); });

                            // Click/tap toggles the menu (useful on touch devices)
                            resourcesToggle.addEventListener('click', function(e){
                                var visible = resourcesDropdown.style.display === 'block' || window.getComputedStyle(resourcesDropdown).display === 'block';
                                resourcesDropdown.style.display = visible ? 'none' : 'block';
                                resourcesToggle.setAttribute('aria-expanded', visible ? 'false' : 'true');
                                e.preventDefault();
                            });

                            resourcesDropdown.addEventListener('keydown', function(e){ var key = e.key; var current = document.activeElement; var idx = resourcesItems.indexOf(current); if(key === 'ArrowDown'){ e.preventDefault(); var next = resourcesItems[(idx + 1) % resourcesItems.length]; if(next) next.focus(); } else if(key === 'ArrowUp'){ e.preventDefault(); var prev = resourcesItems[(idx - 1 + resourcesItems.length) % resourcesItems.length]; if(prev) prev.focus(); } else if(key === 'Home'){ e.preventDefault(); if(resourcesItems[0]) resourcesItems[0].focus(); } else if(key === 'End'){ e.preventDefault(); if(resourcesItems[resourcesItems.length-1]) resourcesItems[resourcesItems.length-1].focus(); } else if(key === 'Escape'){ resourcesDropdown.style.display = 'none'; resourcesToggle.setAttribute('aria-expanded','false'); resourcesToggle.focus(); } });

                            document.addEventListener('click', function(ev){ if(!resourcesLi.contains(ev.target)){ resourcesDropdown.style.display = 'none'; resourcesToggle.setAttribute('aria-expanded','false'); } });
                        })();
                    });
                    // Improved flicker + drip initialization, auto-enables Halloween between Oct 27–Nov 30 (respects prefers-reduced-motion)
                    (function(){
                        var key = 'halloween-theme';
                        function inRange(){
                            var now = new Date();
                            var start = new Date(now.getFullYear(), 9, 27); // Oct 27
                            var end = new Date(now.getFullYear(), 10, 30); // Nov 30
                            end.setHours(23,59,59,999);
                            return now >= start && now <= end;
                        }
                        var stored = null;
                        try{ stored = localStorage.getItem(key); }catch(e){}
                        var enabled = (stored === '1') || (stored === null && inRange());
                        if(enabled) document.documentElement.classList.add('halloween');

                        var reduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
                        if(reduced) return;

                        // Randomized flicker loop: occasional brief or stronger pulses
                        (function flickerLoop(){
                            var next = 2000 + Math.random() * 7000; // 2s - 9s between pulses
                            setTimeout(function(){
                                var strong = Math.random() < 0.18; // ~18% chance of a stronger pulse
                                var cls = strong ? 'flicker-strong' : 'flicker-brief';
                                var dur = strong ? (160 + Math.random() * 340) : (60 + Math.random() * 180); // ms
                                document.body.classList.add(cls);
                                setTimeout(function(){ document.body.classList.remove(cls); }, dur);
                                flickerLoop();
                            }, next);
                        })();

                        // Create multiple drip elements under the title with randomized timing/positions
                        function initDrips(){
                            var container = document.querySelector('.site-title .drips');
                            var title = document.querySelector('.site-title');
                            if(!container || !title) return;
                            // clear any existing
                            container.innerHTML = '';
                            var count = Math.min(7, Math.max(3, Math.floor(title.clientWidth / 140)) );
                            for(var i=0;i<count;i++){
                                var d = document.createElement('span');
                                d.className = 'drip';
                                // pick a left position across the text width with small padding
                                var padding = 8;
                                var left = padding + Math.random() * Math.max(0, title.clientWidth - padding*2);
                                d.style.left = Math.round(left) + 'px';
                                // randomized animation durations and delays
                                var fall = (0.9 + Math.random() * 1.6).toFixed(2);
                                var swell = (1.0 + Math.random() * 1.4).toFixed(2);
                                var delay1 = (Math.random() * 3).toFixed(2);
                                var delay2 = (Math.random() * 3).toFixed(2);
                                d.style.animationDuration = fall + 's, ' + swell + 's';
                                d.style.animationDelay = delay1 + 's, ' + delay2 + 's';
                                container.appendChild(d);
                            }
                        }
                        // init on load and on resize (debounced)
                        initDrips();
                        var rzTimeout = null;
                        window.addEventListener('resize', function(){ if(rzTimeout) clearTimeout(rzTimeout); rzTimeout = setTimeout(initDrips, 260); });
                    })();
                </script>
            </div>
        </nav>
        <div class="container">
            <h1>Training Scripts</h1>
            <p class="muted">Click a division to expand the training scripts.</p>

            <!-- Training manuals have been moved to individual pages -->
            <div class="expandable" id="resources-listing">
                <div class="expandable-header" style="cursor:default">
                    <strong>Training Manuals (moved)</strong>
                </div>
                <div class="expandable-content" style="max-height: none;">
                    <ul class="rank-list" style="padding:0.5rem 1rem; margin:0; list-style: none;">
                        <li style="padding:0.45rem 0;"><a href="/recruit-training.html">Recruit Training Manual</a></li>
                        <li style="padding:0.45rem 0;"><a href="/security-training.html">Security Training Manual</a></li>
                        <li style="padding:0.45rem 0;"><a href="/education-training.html">Education Training Manual</a></li>
                        <li style="padding:0.45rem 0;"><a href="/high-rank-training.html">High Rank Training Manual</a></li>
                        <li style="padding:0.45rem 0;"><a href="/tour-script.html">Tour Script</a></li>
                        <li style="padding:0.45rem 0;"><a href="/transfer-training.html">Transfer Training Script</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <script>
            (function(){
                var expandables = document.querySelectorAll('.expandable');
                expandables.forEach(function(exp){
                    var header = exp.querySelector('.expandable-header');
                    var content = exp.querySelector('.expandable-content');
                    // ensure content height is correct if open on load
                    if(exp.classList.contains('open')){
                        content.style.maxHeight = content.scrollHeight + 'px';
                        header.setAttribute('aria-expanded','true');
                    }
                    function toggle(){
                        var open = exp.classList.toggle('open');
                        header.setAttribute('aria-expanded', open ? 'true' : 'false');
                        if(open) {
                            content.style.maxHeight = content.scrollHeight + 'px';
                        } else {
                            content.style.maxHeight = '0';
                        }
                    }
                    header.addEventListener('click', toggle);
                    header.addEventListener('keydown', function(e){ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(); } });
                });
            })();
        </script>

    <div id="popup" class="popup" role="status" aria-live="polite"></div>

    <script>
        // Copy-to-clipboard helper and popup
        function showPopupAt(msg, x, y){
            var popup = document.getElementById('popup');
            if(!popup) return;
            popup.textContent = msg;
            // clamp position within viewport (fixed positioning)
            var pad = 8;
            var vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
            var vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);
            // Ensure popup has been measured (temporarily show hidden to measure)
            popup.style.display = 'block';
            popup.classList.remove('show');
            popup.style.left = '0px'; popup.style.top = '0px';
            var left = Math.min(Math.max(x + pad, pad), vw - popup.offsetWidth - pad);
            var top = Math.min(Math.max(y + pad, pad), vh - popup.offsetHeight - pad);
            popup.style.left = left + 'px';
            popup.style.top = top + 'px';
            // animate in
            popup.classList.add('show');
            clearTimeout(popup._hideTimeout);
            popup._hideTimeout = setTimeout(function(){ popup.classList.remove('show');
                // remove from flow after animation
                setTimeout(function(){ if(popup && !popup.classList.contains('show')) popup.style.display = 'none'; }, 220);
            }, 1400);
        }

        // Apply a brief highlight to the nearest containing heading/paragraph when a copy occurs
        function flashSourceFromEvent(ev){
            try{
                var target = ev && ev.currentTarget ? ev.currentTarget : (ev && ev.target ? ev.target : null);
                var el = target && target.closest ? target.closest('h5,h6,h3,p,li,div') : null;
                if(!el) return;
                el.classList.add('copied-highlight');
                clearTimeout(el._copiedTO);
                el._copiedTO = setTimeout(function(){ el.classList.remove('copied-highlight'); }, 1200);
            }catch(e){}
        }

        function copyText(ev, text){
            ev = ev || window.event;
            var x = (ev.clientX != null) ? ev.clientX : (ev.touches && ev.touches[0] && ev.touches[0].clientX) || 12;
            var y = (ev.clientY != null) ? ev.clientY : (ev.touches && ev.touches[0] && ev.touches[0].clientY) || 12;


            if(navigator.clipboard && navigator.clipboard.writeText){
                navigator.clipboard.writeText(text).then(function(){ showPopupAt('Copied', x, y); flashSourceFromEvent(ev); }).catch(function(){ fallbackCopy(text, x, y, ev); });
            } else {
                fallbackCopy(text, x, y, ev);
            }
        }

        function fallbackCopy(text, x, y, ev){
            var ta = document.createElement('textarea');
            ta.value = text;
            ta.setAttribute('readonly', '');
            ta.style.position = 'absolute';
            ta.style.left = '-9999px';
            document.body.appendChild(ta);
            ta.select();
            try{ document.execCommand('copy'); showPopupAt('Copied', x, y); if(ev) flashSourceFromEvent(ev); }catch(e){ showPopupAt('Copy failed', x, y); }
            document.body.removeChild(ta);
        }

        // Convert any legacy <img class="copy-icon" ...> into accessible <button class="copy-btn">
        // For reliability we compute the copy text from the parent element's visible text (so embedded apostrophes/quotes are preserved)
        document.addEventListener('DOMContentLoaded', function(){
            var imgs = Array.prototype.slice.call(document.querySelectorAll('img.copy-icon'));
            imgs.forEach(function(img){
                try{
                    var aria = img.getAttribute('alt') || 'Copy text';
                    var btn = document.createElement('button');
                    btn.type = 'button';
                    btn.className = 'copy-btn';
                    btn.setAttribute('aria-label', aria);

                    // Compute copy text by cloning parent and removing images/buttons, then reading textContent
                    var copyTextValue = '';
                    var parent = img.parentNode;
                    if(parent){
                        var clone = parent.cloneNode(true);
                        // remove images/buttons from the clone
                        var removes = clone.querySelectorAll('img, button');
                        removes.forEach(function(n){ n.remove(); });
                        copyTextValue = clone.textContent.trim();
                    }
                    // Fallbacks
                    if(!copyTextValue) copyTextValue = img.getAttribute('data-copy') || img.getAttribute('alt') || '';

                    // wire click to copy the computed text
                    btn.addEventListener('click', function(e){ copyText(e, copyTextValue); });
                    btn.addEventListener('keydown', function(e){ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); copyText(e, copyTextValue); } });

                    // Use inline SVG (reliable) and keep a FontAwesome <i> optionally present.
                    btn.innerHTML = '<svg class="copy-svg" viewBox="0 0 24 24" aria-hidden="true"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2z"></path></svg><i class="fa-solid fa-copy copy-fa" aria-hidden="true" style="display:none"></i>';
                    img.parentNode.replaceChild(btn, img);
                }catch(e){ /* ignore conversion errors */ }
            });
        });
    </script>
    <!-- Cursor decorations removed from this page (native cursor restored) -->
    <script>
        // Flying ghost spawner — creates lightweight ghost elements when .halloween is active
        (function(){
            function shouldRun(){
                if(!(document && document.documentElement)) return false;
                if(!document.documentElement.classList.contains('halloween')) return false;
                if(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) return false;
                return true;
            }

            var maxActive = 4;
            var active = 0;

            function spawnGhost(){
                if(!shouldRun()) return;
                if(active >= maxActive) return;
                active++;
                var g = document.createElement('div');
                g.className = 'ghost';
                // size, position and motion
                var size = 42 + Math.random() * 72; // px
                g.style.width = Math.round(size) + 'px';
                g.style.height = Math.round(size) + 'px';
                var leftPct = 6 + Math.random() * 88; // keep inside viewport
                g.style.left = leftPct + '%';
                // horizontal wiggle (CSS var)
                var gx = Math.round((Math.random() - 0.5) * 180) + 'px';
                g.style.setProperty('--gx', gx);
                var dur = 6 + Math.random() * 8; // seconds
                g.style.animation = 'ghost-float ' + dur.toFixed(2) + 's linear forwards';

                var body = document.createElement('div'); body.className = 'gbody';
                var e1 = document.createElement('i'); e1.className = 'geye';
                var e2 = document.createElement('i'); e2.className = 'geye r';
                body.appendChild(e1); body.appendChild(e2);
                g.appendChild(body);

                // remove after animation
                g.addEventListener('animationend', function(){ try{ g.remove(); }catch(e){} active = Math.max(0, active-1); });

                document.body.appendChild(g);
            }

            // Kick off a few and then keep spawning occasionally while Halloween is active
            document.addEventListener('DOMContentLoaded', function(){
                if(!shouldRun()) return;
                // initial pair
                setTimeout(spawnGhost, 400 + Math.random()*800);
                setTimeout(spawnGhost, 900 + Math.random()*1200);
                // recurring attempts
                var interval = setInterval(function(){ if(!shouldRun()){ clearInterval(interval); return; } if(Math.random() < 0.55) spawnGhost(); }, 1800);
            });
        })();
    </script>
</body>
</html>